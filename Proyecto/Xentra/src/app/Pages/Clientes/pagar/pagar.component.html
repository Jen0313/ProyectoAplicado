
<div class="container min-vh-100 d-flex flex-column justify-content-center">
  <h2 class="fw-bold text-center text-primary mb-4">üí≥ Realizar Abono</h2>

  <div class="row d-flex align-items-center">
    <!--  Tarjeta de Cr√©dito -->
    <div class="col-md-6 d-flex justify-content-center">
      <card-credito [credito]="credito">
        <p class="mb-3"><strong>Debes:</strong> ${{ credito.Monto - credito.Restante }}</p>
      </card-credito>
    </div>

    <!--  Formulario de Pago -->
    <div class="col-md-6">
      <form [formGroup]="pagoForm" (ngSubmit)="simularPago()" class="card p-4 shadow-sm">
        <h5 class="fw-bold text-primary mb-3">üí∞ Pago con Tarjeta</h5>

        <!--  N√∫mero de Tarjeta -->
        <div class="mb-3">
          <label class="form-label fw-bold">N√∫mero de tarjeta</label>
          <input type="text" class="form-control" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                 formControlName="numeroTarjeta">
          @if (pagoForm.controls.numeroTarjeta.invalid && pagoForm.get("numeroTarjeta")?.touched) {
            <div class="invalid-feedback d-block">‚ö†Ô∏è Ingrese un n√∫mero de tarjeta v√°lido.</div>
          }
        </div>

        <!--  Fecha de Expiraci√≥n y CVV -->
        <div class="row">
          <div class="col-6">
            <label class="form-label fw-bold">Fecha de expiraci√≥n</label>
            <input type="text" class="form-control" placeholder="MM/YY"
                   formControlName="fechaExp">
            @if (pagoForm.controls.fechaExp.invalid && pagoForm.get("fechaExp")?.touched) {
              <div class="invalid-feedback d-block">‚ö†Ô∏è Ingrese una fecha v√°lida (MM/YY).</div>
            }
          </div>
          <div class="col-6">
            <label class="form-label fw-bold">CVV</label>
            <input type="text" class="form-control" placeholder="‚Ä¢‚Ä¢‚Ä¢"
                   formControlName="cvv">
            @if (pagoForm.controls.cvv.invalid && pagoForm.get("cvv")?.touched) {
              <div class="invalid-feedback d-block">‚ö†Ô∏è Ingrese un CVV v√°lido (3 d√≠gitos).</div>
            }
          </div>
        </div>

        <!--  Monto a Abonar -->
        <div class="mt-3">
          <label class="form-label fw-bold">Monto a abonar</label>
          <input type="number" class="form-control"
                 formControlName="abono" [max]="credito.Monto - credito.Restante">
          @if (pagoForm.controls.abono.invalid && pagoForm.get("abono")?.touched) {
            <div class="invalid-feedback d-block">‚ö†Ô∏è Ingresa un monto v√°lido dentro del l√≠mite.</div>
          }
        </div>

        <!--  Bot√≥n de Pago -->
        <button class="btn btn-success w-100 mt-3"
                [disabled]="pagoForm.invalid">
          <i class="bi bi-credit-card"></i> Pagar
        </button>

        <!--  Animaci√≥n de Procesamiento -->
        @if (procesandoPago) {
          <div class="text-center mt-3">
            <div class="spinner-border text-primary"></div>
            <p class="mt-2 text-muted">Procesando pago...</p>
          </div>
        }

        <!--  Mensaje de Pago Exitoso -->
        @if (pagoExitoso) {
          <div class="text-center mt-3">
            <h4 class="text-success fw-bold"><i class="bi bi-check-circle"></i> Pago realizado con √©xito</h4>
            <p>Gracias por tu pago. Tu cr√©dito ha sido actualizado.</p>
          </div>
        }
      </form>
    </div>
  </div>
</div>
